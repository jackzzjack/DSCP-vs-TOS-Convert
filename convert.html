<html>
	<head>
		<!-- Include Jquery Library. -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		
		<!-- Callback event -->
		<script>
			function convert() {
				var dscp = get_check_DSCP_field();
				var tos = get_check_TOS_field();
				var ecn = get_check_ECN_field();
				var ipp = get_check_IPP_field();
				
				if (dscp == -1 || ecn == -1) {
					open_StatusDiv();
				}
				
				// Result
				// DSCP-ECN => IPP-TOS
				document.getElementById('TOS_input').value = (dscp & 7) << 2 | ecn;
				document.getElementById('IPP_input').value = (dscp >> 3);
			}
			
			function get_check_DSCP_field() {
				var dscp = document.getElementById('DSCP_input').value;
				
				if (dscp > 63) {
					console.log("DSCP too high.");
					
					return -1;
				}
				
				return dscp;
			}
			
			function get_check_TOS_field() {
				var tos = document.getElementById('TOS_input').value;
				
				if (tos > 31) {
					console.log("TOS too high.");
					
					return -1;
				}
				
				return tos;
			}
			
			function get_check_ECN_field() {
				var ecn = document.getElementById('ECN_input').value;
				
				if (ecn > 3) {
					console.log("ECN too high.");
					
					return -1;
				}
				
				return ecn;
			}
			
			function get_check_IPP_field() {
				var ipp = document.getElementById('IPP_input').value;
				
				if (ipp > 7) {
					console.log("IP Precedence too high.");
					
					return -1;
				}
				
				return ipp;
			}
			
			function optionClick(type) {
				open_DataSection();
				open_SubmitSection();
				
				switch (type) {
					case 1:
						type1_section();
						break;
					case 2:
						type2_section();
						break;
					default:
						break;
				}
				
		//		hide_StatusDiv();
			}
			
			function open_DataSection() {
				document.getElementById('data').hidden = false;
			}
			
			function open_SubmitSection() {
				document.getElementById('submit').hidden = false;
			} 
			
			function open_StatusDiv() {
				document.getElementById('check_status').style.visibility = "visible";
			}
			
			DSCP_ECN =
				'<div class="form-group">\
					<label>DSCP:</label>\
					<input id="DSCP_input" type="text" onfocusout="get_check_DSCP_field()"><br>\
				</div>\
				<div class="form-group">\
					<label>ECN:</label>\
					<input type="text" id="ECN_input" onfocusout="get_check_ECN_field()"><br>\
				</div>';
					
			IPP_TOS =
				'<div class="form-group">\
					<label>Precedence:</label>\
					<input id="IPP_input" type="text" onfocusout="get_check_IPP_field()"><br>\
				</div>\
				<div class="form-group">\
					<label>Type of Service:</label>\
					<input type="text" id="TOS_input" onfocusout="get_check_TOS_field()"><br>\
				</div>';
			
			STATUS_BAR =
				'<div id="check_status" class="alert alert-danger form-group" role="alert" style="visibility: hidden;">\
					Your data may error.\
				</div>';
			
			function type1_section() {
				document.getElementById('row1').innerHTML = DSCP_ECN + '\n' + STATUS_BAR;
				document.getElementById('row2').innerHTML = IPP_TOS;
			}
			
			function type2_section() {
				document.getElementById('row1').innerHTML = IPP_TOS + '\n' + STATUS_BAR;
				document.getElementById('row2').innerHTML = DSCP_ECN;
			}
			
		</script>
	</head>
	<body>
		<div id="option">
			<h1>Type</h1>
			<div class="radio" align="center">
				<label>
					<input type="radio" name="optionsRadios" onclick="optionClick(1)">DSCP-ECN to IP Precedence-Type of Service
				</label>
			</div>
			<div class="radio" align="center">
				<label>
					<input type="radio" name="optionsRadios" onclick="optionClick(2)">IP Precedence-Type of Service to DSCP-ECN
				</label>
			</div>
		</div>
		
		<div id="data">
			<h1>Data</h1>
			<div class="form-inline" id="row1" align="center">
				<!-- Fill from Javascript, Function type1_section(); -->
			</div>
			
			<div class="form-inline" id="row2" align="center">
				<!-- Fill from Javascript, Function type2_section(); -->
			</div>
		</div>
		
		<div align="center" id="submit" hidden="true">
			<button class="btn btn-primary" onclick="convert();">Convert</button>
		</div>
	</body>
</html>